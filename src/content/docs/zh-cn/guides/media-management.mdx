---
title: 媒体管理
description: 了解如何在 Paideia LMS 中管理媒体文件、上传内容以及跟踪媒体使用情况。
i18nReady: true
---

媒体驱动器是您在 Paideia LMS 中所有媒体文件的个人存储空间。您上传的每个文件都与您的账户关联，允许您查看、组织、下载、重命名和删除媒体文件。媒体驱动器是跨作业、笔记和其他内容类型的媒体上传的基础。

## 为什么 Paideia 媒体驱动器是独特的

Paideia 的内置媒体驱动器是一个强大的功能，使其与传统的学习管理系统区别开来。与大多数依赖外部存储集成（如 OneDrive、Google Drive 或 Dropbox）的 LMS 平台不同，Paideia 提供了一个完全集成的媒体管理系统，直接构建在平台中。

### 内置集成

**传统 LMS 的限制：**
- 大多数 LMS 平台需要与外部云存储服务集成
- 外部驱动器是与 LMS 分离的系统
- 当集成未正确配置时，经常出现权限和访问控制问题
- 由于权限不匹配，学生和教师难以访问文件
- 跨系统边界时文件共享变得复杂

**Paideia 的优势：**
- **原生集成**：媒体驱动器直接构建在 LMS 中，不是单独的系统
- **自动权限**：所有权限和访问控制都由系统自动配置
- **无权限问题**：由于所有内容都在同一系统内，没有跨系统权限冲突
- **无缝访问**：学生和教师可以在不处理外部身份验证的情况下访问文件
- **统一体验**：所有媒体操作在整个平台上一致工作

### 几乎 unlimited 存储

Paideia 使用 S3 兼容存储（如 AWS S3、MinIO 或其他 S3 兼容服务），提供：

- **可扩展存储**：存储容量随您的需求扩展
- **成本效益**：只为使用的内容付费
- **可靠**：企业级存储基础设施
- **无硬限制**：与具有存储配额的外部集成不同，Paideia 基于 S3 的存储几乎是 unlimited 的

管理员可以根据需要配置每个用户的存储配额，但底层存储系统可以扩展以容纳任何数量的数据。

### 全面管理

对于管理员，Paideia 提供详细的统计和管理工具：

- **存储分析**：查看哪些用户使用了多少存储
- **文件类型分析**：了解哪些类型的文件消耗最多存储
- **使用跟踪**：监控平台上的媒体文件使用情况
- **孤立文件检测**：识别和清理未使用的文件
- **系统范围视图**：从单个界面管理所有媒体文件

这些统计对于以下方面非常宝贵：
- **容量规划**：了解存储增长趋势
- **资源管理**：识别高存储使用量的用户
- **成本优化**：找到优化存储使用的机会
- **系统健康**：监控整体系统媒体使用情况

## 概述

媒体驱动器提供：

- **个人存储**：所有上传的媒体文件集中在一个地方
- **多种视图模式**：卡片视图和表格视图，满足不同偏好
- **文件操作**：上传、下载、重命名和删除文件
- **存储配额**：存储使用情况和限制的可视化显示
- **媒体预览**：图像、音频、视频和 PDF 文件的内联预览
- **使用跟踪**：在删除前查看媒体文件的使用位置
- **批量操作**：一次选择和删除多个文件

## 访问媒体驱动器

有两种方式访问媒体驱动器：

### 方法1：通过用户菜单

1. 点击顶部导航栏中的用户配置文件
2. 从下拉菜单中选择 **"媒体"**
3. 您将被带到 `/user/media` 的媒体驱动器页面

### 方法2：通过用户布局选项卡

1. 导航到任何用户配置文件页面（您自己的或其他用户的）
2. 点击用户布局导航中的 **"媒体"** 选项卡
3. 媒体驱动器页面将显示您的所有媒体文件

![用户媒体驱动器](/gallery/user-media-drive.webp)

## 上传文件

要将媒体文件上传到驱动器：

1. 导航到媒体驱动器页面
2. 点击标题中的 **"+ 上传"** 按钮
3. 从计算机中选择一个或多个文件
4. 文件将自动上传

### 支持的文件类型

媒体驱动器接受各种文件类型，包括：

- **图像**：JPEG、PNG、GIF、WebP、SVG
- **音频**：MP3、WAV、OGG、M4A
- **视频**：MP4、WebM、OGG、MOV
- **文档**：PDF、DOC、DOCX、XLS、XLSX、PPT、PPTX
- **文本**：TXT、MD
- **存档**：ZIP、RAR、7Z

### 上传限制

上传文件大小受管理员配置的站点范围上传限制限制。如果您尝试上传超过限制的文件，您将看到指示最大允许文件大小的错误消息。

:::tip
如果您的文件太大，错误消息中会显示上传限制。如果您需要上传更大的文件，请联系管理员。
:::

## 查看媒体

媒体驱动器提供两种显示文件的视图模式：

### 卡片视图

卡片视图将媒体文件显示为视觉卡片，包含：

- **缩略图**：图像预览或文件类型图标
- **文件信息**：名称、大小、创建日期
- **快速操作**：用于选择的复选框、操作菜单（三个点）
- **内联预览**：媒体文件的音频和视频播放器

### 表格视图

表格视图以数据表格格式显示媒体文件，包含：

- **列**：文件名、大小、创建日期、操作
- **可排序列**：点击列标题进行排序
- **行选择**：用于选择多个文件的复选框
- **紧凑显示**：一次显示更多文件

使用标题中的 **"卡片"** 和 **"表格"** 切换按钮在视图之间切换。

## 预览媒体

媒体驱动器支持各种文件类型的内联和全尺寸预览：

### 内联预览

- **图像**：在卡片视图中显示的缩略图
- **音频**：在卡片视图中带控件的音频播放器
- **视频**：在卡片视图中带控件的视频播放器（最大 150px 高度）

### 全尺寸预览模态

通过点击任何媒体文件上的操作菜单（三个点）中的 **"预览"** 选项访问预览模态。模态支持：

- **图像**：具有适当缩放的全尺寸图像
- **音频**：具有所有控件的完整音频播放器
- **视频**：具有所有控件的完整视频播放器（最大 80vh 高度）
- **PDF**：通过 iframe 的浏览器原生 PDF 查看器

## 下载文件

要下载媒体文件：

1. 点击文件卡片或表格行上的操作菜单（三个点）
2. 选择 **"下载"**
3. 文件将以原始文件名下载

文件使用适当的 `Content-Disposition` 标头下载，以确保使用正确的文件名。

## 重命名文件

要重命名媒体文件：

1. 点击文件上的操作菜单（三个点）
2. 选择 **"重命名"**
3. 在模态对话框中输入新文件名
4. 点击 **"保存"** 确认

重命名操作会更新数据库记录和 S3 存储文件，确保整个系统的一致性。

:::caution
文件名必须是唯一的。如果您尝试将文件重命名为已存在的名称，操作将失败并显示错误消息。
:::

## 删除文件

您可以单独或批量删除文件：

### 单个文件删除

1. 点击文件上的操作菜单（三个点）
2. 选择 **"删除"**
3. 在对话框中确认删除
4. 文件将从数据库和 S3 存储中删除

### 批量删除

1. 使用复选框（卡片视图）或行选择（表格视图）选择多个文件
2. 点击出现的 **"删除所选"** 按钮
3. 在对话框中确认删除
4. 所有选定的文件将被删除

:::danger
删除是永久性的，无法撤销。在删除可能正在使用的文件之前，请确保检查媒体使用情况。
:::

## 存储配额

媒体驱动器使用可视化圆环图显示存储使用情况：

### 设置存储限制时

- **已用存储**：显示您已使用的存储量
- **可用存储**：显示剩余的存储量
- **图表标签**：显示 "X / Y"（已用 / 限制）
- **配额文本**：显示您的总存储配额

### 存储无限制时

- **已用存储**：仅显示您已使用的存储量
- **图表标签**：仅显示使用量
- **配额文本**：显示 "无限制"

存储配额由管理员配置，适用于您上传的所有媒体文件，包括在作业、笔记和其他内容中使用的文件。

## 媒体使用跟踪

在删除媒体文件之前，您可以检查它们的使用位置：

### 查看媒体使用情况

1. 点击任何媒体文件上的操作菜单（三个点）
2. 选择 **"显示使用情况"**
3. 模态将显示文件被引用的所有位置

### 使用信息

使用情况模态显示：

- **总使用次数**：文件被引用的位置数
- **使用详情**：每次使用的集合名称、文档 ID 和字段路径

常见的使用位置包括：

- **用户头像**：`users` 集合，`avatar` 字段
- **课程缩略图**：`courses` 集合，`thumbnail` 字段
- **作业附件**：`assignment-submissions` 集合，`attachments[].file` 字段
- **讨论附件**：`discussion-submissions` 集合，`attachments[].file` 字段
- **内容媒体**：`courses`、`pages`、`notes` 集合，`media` 关系字段

### 删除保护

如果您尝试删除仍在使用的媒体文件，系统将：

1. 在删除前检查所有使用情况
2. 如果发现任何使用情况，则阻止删除
3. 显示包含媒体 ID 和使用次数的错误消息
4. 要求您在删除前删除所有引用

此保护可防止意外删除仍在内容中引用的文件。

![媒体使用跟踪](/gallery/user-media-drive-check-usage.webp)

## 最佳实践

### 组织媒体

- **使用描述性文件名**：清楚地命名文件以便于查找
- **按需上传**：需要时上传文件，而不是批量上传
- **删除前检查使用情况**：在删除文件之前始终检查使用情况
- **监控存储**：注意存储配额以避免达到限制

### 文件管理

- **定期清理**：定期审查并删除未使用的文件
- **批量操作**：使用批量删除一次清理多个文件
- **使用前预览**：在内容中使用之前使用预览功能验证文件

### 存储管理

- **优化文件大小**：尽可能压缩图像和视频
- **使用适当的格式**：选择平衡质量和大小的文件格式
- **监控配额**：定期检查存储使用情况以保持在限制内

## 故障排除

### 无法上传文件

如果无法上传文件：

1. 检查文件大小是否在上传限制内
2. 验证文件类型是否受支持
3. 确保有可用的存储配额（如果设置了限制）
4. 检查互联网连接
5. 如果问题持续，请联系管理员

### 文件未显示

如果上传的文件未显示：

1. 刷新页面
2. 检查您是否正在查看正确用户的媒体驱动器
3. 验证上传是否成功完成
4. 检查浏览器控制台是否有错误

### 无法删除文件

如果无法删除文件：

1. 检查使用情况模态以查看文件被引用的位置
2. 在尝试删除之前删除文件的所有引用
3. 验证您有删除文件的权限（您只能删除自己的文件）
4. 如果您需要删除被其他用户引用的文件，请联系管理员

### 存储配额问题

如果达到存储限制：

1. 在存储图表中检查当前使用情况
2. 删除未使用的文件以释放空间
3. 联系管理员请求增加配额
4. 考虑在上传前优化文件大小

## 相关功能

- [网站策略](/zh-cn/guides/admin-and-server/site-policies/) - 了解存储配额和上传限制
- [管理员媒体管理](/zh-cn/guides/admin-and-server/admin-media-management/) - 管理员可以查看和管理所有系统媒体
- [用户概述](/zh-cn/basics/user-overview/) - 了解用户角色和权限

