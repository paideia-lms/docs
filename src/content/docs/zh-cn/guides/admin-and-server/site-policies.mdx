---
title: 网站策略
description: 为您的 Paideia LMS 站点配置媒体存储限制和上传限制。
i18nReady: true
---

网站策略允许管理员配置媒体存储配额和文件上传限制的系统范围设置。这些策略有助于管理平台上的存储使用情况，并确保所有用户的一致上传限制。

## 概述

网站策略提供：

- **用户媒体存储配额**：设置每个用户允许的最大存储
- **网站上传限制**：设置所有上传的最大文件大小
- **无限制选项**：支持无限制存储和上传大小
- **快速预设**：用于快速配置的常用值
- **自定义值**：使用自定义字节值进行精确控制

## 访问网站策略

有两种方式访问网站策略页面：

### 方法1：通过管理员仪表板

1. 以管理员身份登录
2. 导航到顶部导航中的 **站点管理**
3. 点击站点管理菜单中的 **"常规"** 选项卡
4. 滚动到 **"安全"** 部分
5. 点击 **"网站安全设置"**
6. 您将被带到 `/admin/sitepolicies` 的网站策略页面

### 方法2：直接导航

1. 以管理员身份登录
2. 在浏览器中直接导航到 `/admin/sitepolicies`

![网站策略页面](/gallery/admin-sitepolicies.webp)

## 用户媒体存储配额

用户媒体存储总计设置控制每个用户可以为媒体文件使用多少存储空间。

### 设置存储配额

1. 导航到网站策略页面
2. 找到 **"用户媒体存储总计"** 部分
3. 从下拉菜单中选择预设值，或选择 **"自定义..."** 输入特定值
4. 点击 **"保存更改"** 以应用

### 预设选项

快速预设选项包括：

- **无限制**：无存储限制（null 值）
- **100 MB**：每个用户 100 兆字节
- **500 MB**：每个用户 500 兆字节
- **1 GB**：每个用户 1 千兆字节
- **5 GB**：每个用户 5 千兆字节
- **10 GB**：每个用户 10 千兆字节（默认）
- **50 GB**：每个用户 50 千兆字节
- **100 GB**：每个用户 100 千兆字节
- **自定义**：输入字节单位的特定值

### 自定义值

要设置自定义存储配额：

1. 从下拉菜单中选择 **"自定义..."**
2. 在数字输入字段中输入字节值
3. 选择预设时，系统将显示格式化的值（例如，"10 GB"）
4. 点击 **"保存更改"** 以应用

### 默认值

默认存储配额为每个用户 **10 GB**（10 * 1024 * 1024 * 1024 字节）。

### 无限制存储

要允许每个用户无限制存储：

1. 从下拉菜单中选择 **"无限制"**
2. 值将设置为 `null`
3. 用户将在媒体驱动器中看到 "无限制"
4. 点击 **"保存更改"** 以应用

## 网站上传限制

网站上传限制设置控制平台上所有上传允许的最大文件大小。

### 设置上传限制

1. 导航到网站策略页面
2. 找到 **"网站上传限制"** 部分
3. 从下拉菜单中选择预设值，或选择 **"自定义..."** 输入特定值
4. 点击 **"保存更改"** 以应用

### 预设选项

快速预设选项包括：

- **无限制**：无上传大小限制（null 值）
- **1 MB**：最大 1 兆字节
- **5 MB**：最大 5 兆字节
- **10 MB**：最大 10 兆字节
- **20 MB**：最大 20 兆字节（默认）
- **50 MB**：最大 50 兆字节
- **100 MB**：最大 100 兆字节
- **500 MB**：最大 500 兆字节
- **1 GB**：最大 1 千兆字节
- **自定义**：输入字节单位的特定值

### 自定义值

要设置自定义上传限制：

1. 从下拉菜单中选择 **"自定义..."**
2. 在数字输入字段中输入字节值
3. 选择预设时，系统将显示格式化的值（例如，"20 MB"）
4. 点击 **"保存更改"** 以应用

### 默认值

默认上传限制为 **20 MB**（20 * 1024 * 1024 字节）。

### 无限制上传

要允许无限制上传大小：

1. 从下拉菜单中选择 **"无限制"**
2. 值将设置为 `null`
3. 无论大小如何，所有文件上传都将被允许
4. 点击 **"保存更改"** 以应用

## 策略的应用方式

### 存储配额强制执行

存储配额在用户的媒体驱动器中显示给用户：

- **圆环图**：设置限制时显示已用与可用存储
- **配额文本**：显示配置的限制或 "无限制"
- **实时更新**：当用户上传或删除文件时，图表会更新

配额适用于用户上传的所有媒体文件，包括：

- 用户头像
- 作业附件
- 笔记图像
- 课程缩略图
- 讨论附件
- 任何其他媒体文件

### 上传限制强制执行

上传限制在所有路由的上传点强制执行：

- **用户媒体驱动器**：文件上传遵守限制
- **作业提交**：文件附件遵守限制
- **笔记图像**：图像上传遵守限制
- **课程缩略图**：缩略图上传遵守限制
- **用户头像**：头像上传遵守限制

当文件超过限制时：

1. 上传被拒绝
2. 显示错误消息，显示最大允许大小
3. 文件大小格式化为可读性（例如，"文件大小超过最大允许大小 20 MB"）

## 最佳实践

### 设置存储配额

- **考虑用户需求**：根据典型使用模式设置配额
- **保守开始**：从较低的配额开始，根据需要增加
- **监控使用情况**：审查存储使用报告以调整配额
- **考虑增长**：计划随时间增加的使用情况
- **小站点无限制**：考虑为小型部署提供无限制存储

### 设置上传限制

- **平衡可用性和存储**：设置允许必要文件类型的限制
- **考虑文件类型**：不同的内容类型可能需要不同的限制
- **网络考虑**：非常大的限制可能导致超时问题
- **安全性**：合理的限制有助于防止滥用
- **默认值**：20 MB 是大多数用例的良好默认值

### 策略管理

- **记录更改**：保留策略更改的记录
- **通知用户**：策略更改时通知用户
- **测试更改**：验证策略更改按预期工作
- **监控影响**：策略更改后注意问题

## 故障排除

### 策略未应用

如果策略似乎未应用：

1. 验证您已保存更改（点击 "保存更改" 按钮）
2. 刷新页面以查看更新的值
3. 检查您是否正在查看正确的策略设置
4. 验证数据库连接
5. 检查系统日志中的错误

### 用户达到配额限制

如果用户达到配额限制：

1. 在管理员媒体管理中审查当前存储使用情况
2. 如果适当，考虑增加配额
3. 帮助用户识别并删除未使用的文件
4. 提供文件优化指导

### 上传错误

如果用户收到上传错误：

1. 验证上传限制设置是否适当
2. 检查文件大小是否在限制内
3. 审查错误消息以了解具体问题
4. 使用不同的文件类型和大小测试上传

### 无限制设置不工作

如果无限制设置不工作：

1. 验证已选择并保存 "无限制"
2. 检查数据库中的值是否为 `null`
3. 刷新页面以查看更新的设置
4. 验证系统全局变量是否正确获取

## 相关功能

- [媒体管理](/zh-cn/guides/media-management/) - 了解用户如何管理他们的媒体文件
- [管理员媒体管理](/zh-cn/guides/admin-and-server/admin-media-management/) - 查看和管理所有系统媒体
- [维护模式](/zh-cn/guides/admin-and-server/maintenance-mode/) - 了解其他系统范围的设置

